<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Why I am a DataMapper convert (it makes BDD happy)</title>
   <meta name="author" content="Michael D. Ivey" />
   <link rel="alternate" type="application/rss+xml" title="Everything" href="feed://everything.gweezlebur.com/rss" />
   <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/gweezlebur" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <link rel="openid.server"
         href="http://www.myopenid.com/server" />
   <link rel="openid.delegate"
         href="http://ivey.myopenid.com/" />
   <link rel="openid2.local_id"
         href="http://ivey.myopenid.com" />
   <link rel="openid2.provider"
         href="http://www.myopenid.com/server" />
   <meta http-equiv="X-XRDS-Location"
         content="http://www.myopenid.com/xrds?username=ivey.myopenid.com" />
   <!--
      <link rel="openid.server" href="https://pip.verisignlabs.com/server" />
      <link rel="openid.delegate" href="http://ivey.pip.verisignlabs.com/" />
      /-->

   <style type='text/css'>
     @import url('http://assets.skribit.com/stylesheets/SkribitSuggest.css');
   </style>
   <script src='http://assets.skribit.com/javascripts/SkribitSuggest.js' type='text/javascript'>
   </script>
   <script type="text/javascript" charset="utf-8">
     SkribitSuggest.suggest('http://skribit.com/lightbox/gweezlebur');
   </script>

</head>
<body>
<div id="container">
  <div id="header">
  <h1><a href="/">gweezlebur<span class="large-dot">.</span>com</a></h1>
  <h2>Michael Ivey, blogging since '99</h2>
  </div>
  
  <ul id="feeds">
    <li><a href="/">Home</a></li>
    <li><a href="http://everything.gweezlebur.com">Everything</a></li>
    <li><a href="/contact">Contact</a></li>
<!--    <li><a href="/pages">Pages</a></li>
    <li><a href="/files">Files</a></li> /-->
    <li><a href="/archive.html">Archive</a></li>
    <li><a href="http://divvs.com">Divvs</a></li>
    <li><a href="http://twitpay.me">Twitpay</a></li>
    <li><a href="http://iveyandbrown.com">Consulting</a></li>
  </ul>

  <div id="content">
    <div class="hentry" id="article-/2007/11/09/why-i-am-a-datamapper-convert-it-makes-bdd-happy">
  <h2>
    <abbr class="published" title="{{ page.date | date: '%Y-%m-%dT%H:%M:%
S+00:00' }}">Friday, November 09, 2007</abbr>
  </h2>
  <div class="post blog">
  <h1 class="entry-title"><a href="/2007/11/09/why-i-am-a-datamapper-convert-it-makes-bdd-happy.html">Why I am a DataMapper convert (it makes BDD happy)</a></h1>
  <div class="entry-content">
    <p>There&#8217;s lots of buzz around <a href="http://datamapper.org/">DataMapper</a> right now, especially among the #merb crowd.  I haven&#8217;t had any major issues with ActiveRecord, so I haven&#8217;t needed to look at a new <span class="caps">ORM</span>&#8230;but I like to play with new things, so last night I really gave the DM a try.</p>


	<p>I&#8217;m a complete convert, if for no other reason that the awesome way automigrations play along with <span class="caps">BDD</span>.</p>


	<p>First, tell your spec_helper to use automigrations:</p>


<div>
  <pre>
    <code class='ruby'>DataMapper::Base.auto_migrate!</code>
  </pre>
</div>

	<p>This <strong>will cause your database tables to be dropped and re-created</strong> so use with caution.</p>


	<p>Next, let&#8217;s spec some behavior:</p>


<div>
  <pre>
    <code class='ruby'>it &amp;quot;should have a username field&amp;quot; do
  @person.username = &amp;quot;jjames&amp;quot;
  @person.username.should == &amp;quot;jjames&amp;quot;
end</code>
  </pre>
</div>

	<p>And see what autotest says:</p>


<div>
  <pre>
    <code class='text'>....F.....

1)
NoMethodError in 'Person should have a username field'
undefined method `username=' for #&amp;lt;Person:0x13f720c&amp;gt;
./spec/models/person_spec.rb:38:

Finished in 0.049775 seconds

10 examples, 1 failure</code>
  </pre>
</div>

	<p>Cool, that&#8217;s what we expected.  Now, with ActiveRecord, to get to green, we&#8217;d need to create a migration and run it.  With DataMapper, we stay in our model:</p>


<div>
  <pre>
    <code class='ruby'>class Person &amp;lt; DataMapper::Base
  property :username, :string
end</code>
  </pre>
</div>

	<p>And autotest says&#8230;</p>


<div>
  <pre>
    <code class='text'>..........

Finished in 0.040584 seconds

10 examples, 0 failures</code>
  </pre>
</div>

	<p>Now, is this perfect?  Not yet.  DM has a good amount of work still.  There&#8217;s some smart folks working on it, and I bet it will be pretty sweet in a few more weeks.</p>


	<p>But, man&#8230;that&#8217;s just awesome.</p>
  </div>
</div>
 
<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>10 Nov 2008</span> &raquo; <a href="/2008/11/10/twitpay-an-atlanta-startup-weekend-2-company.html">Twitpay: An Atlanta Startup Weekend 2 Company</a></li>
    
      <li><span>27 Oct 2008</span> &raquo; <a href="/2008/10/27/find-the-princess-in-your-editor.html">Find the Princess in Your Editor</a></li>
    
      <li><span>06 Oct 2008</span> &raquo; <a href="/2008/10/06/the-me-meme.html">The Me Meme</a></li>
    
  </ul>
</div>

  </div>

  <div id="footer">
    <a href="http://creativecommons.org/licenses/by-sa/1.0/"><img alt="Creative Commons License" border="0" src="http://creativecommons.org/images/public/somerights" /></a> 
    Copyright &copy; 1998-2009 Michael Ivey unless otherwise stated.
    Unless otherwise noted, all content is licensed under a <a href="http://creativecommons.org/licenses/by-sa/1.0/">Creative Commons License</a>.
    <div id="generated">Page generated January  4 2009 at 10:17 PM by <a href="http://github.com/mojombo/jekyll">Jekyll</a>.</div>
  </div>


</div>
  
</body>
</html>
