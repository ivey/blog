<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Contributing to Merb (Part 1)</title>
   <meta name="author" content="Michael D. Ivey" />
   <link rel="alternate" type="application/rss+xml" title="Everything" href="feed://everything.gweezlebur.com/rss" />
   <link rel="alternate" type="application/rss+xml" title="RSS" href="http://feeds.feedburner.com/gweezlebur" />

   <!-- syntax highlighting CSS -->
   <link rel="stylesheet" href="/css/syntax.css" type="text/css" />

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />

   <link rel="openid.server"
         href="http://www.myopenid.com/server" />
   <link rel="openid.delegate"
         href="http://ivey.myopenid.com/" />
   <link rel="openid2.local_id"
         href="http://ivey.myopenid.com" />
   <link rel="openid2.provider"
         href="http://www.myopenid.com/server" />
   <meta http-equiv="X-XRDS-Location"
         content="http://www.myopenid.com/xrds?username=ivey.myopenid.com" />
   <!--
      <link rel="openid.server" href="https://pip.verisignlabs.com/server" />
      <link rel="openid.delegate" href="http://ivey.pip.verisignlabs.com/" />
      /-->

   <style type='text/css'>
     @import url('http://assets.skribit.com/stylesheets/SkribitSuggest.css');
   </style>
   <script src='http://assets.skribit.com/javascripts/SkribitSuggest.js' type='text/javascript'>
   </script>
   <script type="text/javascript" charset="utf-8">
     SkribitSuggest.suggest('http://skribit.com/lightbox/gweezlebur');
   </script>

</head>
<body>
<div id="container">
  <div id="header">
  <h1><a href="/">gweezlebur<span class="large-dot">.</span>com</a></h1>
  <h2>Michael Ivey, blogging since '99</h2>
  </div>
  
  <ul id="feeds">
    <li><a href="/">Home</a></li>
    <li><a href="http://everything.gweezlebur.com">Everything</a></li>
    <li><a href="/contact">Contact</a></li>
<!--    <li><a href="/pages">Pages</a></li>
    <li><a href="/files">Files</a></li> /-->
    <li><a href="/archive.html">Archive</a></li>
    <li><a href="http://divvs.com">Divvs</a></li>
    <li><a href="http://twitpay.me">Twitpay</a></li>
    <li><a href="http://iveyandbrown.com">Consulting</a></li>
  </ul>

  <div id="content">
    <div class="hentry" id="article-/2008/02/01/so-you-want-to-contribute-to-merb-core-part-1">
  <h2>
    <abbr class="published" title="{{ page.date | date: '%Y-%m-%dT%H:%M:%
S+00:00' }}">Friday, February 01, 2008</abbr>
  </h2>
  <div class="post blog">
  <h1 class="entry-title"><a href="/2008/02/01/so-you-want-to-contribute-to-merb-core-part-1.html">Contributing to Merb (Part 1)</a></h1>
  <div class="entry-content">
    <p>I&#8217;ve seen several people ask &#8220;How can I help with merb-core?&#8221; and so, here&#8217;s a little guide. (Updated 2/14 w/ notes on rebasing.  Thanks ReinH.)</p>


	<p>This is part 1 of 2, for people who don&#8217;t want to run their own public fork.</p>


	<h3>Step 1: Get a Lighthouse account</h3>


	<p>All of the Merb development is moving to Lighthouse instead of Trac, so you&#8217;re going to need an account.  <a href="http://merb.lighthouseapp.com/users/new">Go register</a> and then come back here.</p>


	<h3>Step 2: Get git</h3>


	<p>Merb is using <a href="http://git.or.cz/">git</a> for development now.  <a href="http://git.or.cz/#download">There&#8217;s information on the main git site</a> about downloading and installing.  There&#8217;s also some guides for installing on Mac.  Google is your friend.</p>


	<p>You should also configure git with your email address:</p>


<div>
  <pre>
    <code class='shell'>git config --global user.name &amp;quot;Mike Tester&amp;quot;
git config --global user.email &amp;quot;mtester@gweezlebur.com&amp;quot;</code>
  </pre>
</div>

	<p>These are global config settings that will apply to every project you checkout.</p>


	<h3>Step 3: Get Merb</h3>


	<p>Using git is different from using <span class="caps">SVN</span>.  Every repository, whether published or not, is on equal footing with every other one.  All of the official Merb releases will be coming out of <a href="http://github.com/wycats/merb-core/tree/master">wycats&#8217; repository</a>, though, so you probably want to get that one.  Do that with &#8220;git clone&#8221;</p>


<div>
  <pre>
    <code class='text'>$ git clone git://github.com/wycats/merb-core.git
Initialized empty Git repository in /tmp/merb-core/.git/
remote: Generating pack...
remote: Done counting 1684 objects.
remote: Deltifying 1684 objects...
remote:  100% (1684/1684) done
Indexing 1684 objects...
remote: Total 1684 (delta 800), reused 57 (delta 8)
 100% (1684/1684) done
Resolving 800 deltas...
 100% (800/800) done</code>
  </pre>
</div>

	<p>This will create a new repository in the directory merb-core, set up the remote repository links, fetch the latest copy of the upstream repository into your repository. and set up a tracking branch for upstream.</p>


	<h3>Step 4: Fix something</h3>


	<p>This is the whole point, right?  There&#8217;s a bug you&#8217;re dying to fix, or a feature you&#8217;re dying to add.  So let&#8217;s do that.  First, we create what git users calls a &#8220;topic branch&#8221; to hold the changes for this particular bug</p>


<div>
  <pre>
    <code class='text'>$ git checkout -b my_bugfix 
Switched to a new branch &amp;quot;my_bugfix&amp;quot;</code>
  </pre>
</div>

	<p>This creates the branch, and switches us to it.  Now change whatever needs changing, of course running the specs to make sure they still pass.</p>


	<p>There&#8217;s a lot of git commands you may use here that are beyond the scope of this guide, like diff and status.  Consult your favorite git tutorial.</p>


	<p>Now we need to commit the changes.  Remember, in git every repository is equal, so you&#8217;re committing to your local repo, not trying to commit to wycats&#8217;.</p>


<div>
  <pre>
    <code class='text'>$ git commit -a -v</code>
  </pre>
</div>

	<p>This will pop open an editor for us to type a commit message.  It should have a short, very descriptive first line, a blank line, then any other information that&#8217;s relevant.</p>


<blockquote><pre>
Added bug zapper library

This loads in the bugzapper library,
which removes some common bugs,
like the ones in ticket #343.
</pre></blockquote>

	<p>Save and quit, and you&#8217;ll see something like this:</p>


<div>
  <pre>
    <code class='text'>Created commit 14626c1: Added bug zapper library
 1 files changed, 2 insertions(+), 1 deletions(-)</code>
  </pre>
</div>

	<p>The important bit is &#8220;14626c1&#8221; ... it&#8217;s the first part of the unique identifier for this commit.  If you ever need to refer to this exact commit, you&#8217;ll need that.</p>


	<p>However, since we used a topic branch, we know that every commit on this branch is part of the intended changes.  So we can use a shorthand to actually generate our patch(es).  First, though, let&#8217;s make sure we&#8217;re current with upstream</p>


<div>
  <pre>
    <code class='text'>$ git checkout master
$ git pull
$ git checkout my_bugfix
$ git rebase master
$ git format-patch master..
0001-Added-bug-zapper-library.patch
0002-initialize-zapper.patch</code>
  </pre>
</div>

	<p>This says &#8220;make patch files for every commit that is in this branch and not in master&#8221; (master is the default branch you started with).  You can see that I committed another fix, so there are 2 patches.</p>


	<p>If the rebase fails, it means your patches don&#8217;t apply cleanly with the latest upstream changes.  You&#8217;ll have to fix that (either manually or using git merge-tool), and then</p>


<div>
  <pre>
    <code class='text'>$ git rebase --continue</code>
  </pre>
</div>

	<p>After that, continue with formatting the patch.</p>


	<h3>Step 5: Submit the patche(es)</h3>


	<p>Go to Lighthouse.  Create a ticket.  Tag it with &#8220;patch&#8221;.  Attach your patch(es).  Wait for them to be applied.</p>


	<h3>Step 6: Cleanup</h3>


	<p>You should switch back to the master branch now.</p>


<div>
  <pre>
    <code class='text'>$ git checkout master
Switched to branch &amp;quot;master&amp;quot;</code>
  </pre>
</div>

	<p>If your patches have been accepted, you can delete your branch, too:</p>


<div>
  <pre>
    <code class='text'>$ git branch -D my_bugfix
Deleted branch my_bugfix.</code>
  </pre>
</div>

	<p>Branches are cheap, so you can leave it around for a while, if you think you might come back to it.</p>


	<p>You should also pull down the latest changes, so your next patch will apply cleanly:</p>


<div>
  <pre>
    <code class='text'>$ git pull</code>
  </pre>
</div>
  </div>
</div>
 
<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>10 Nov 2008</span> &raquo; <a href="/2008/11/10/twitpay-an-atlanta-startup-weekend-2-company.html">Twitpay: An Atlanta Startup Weekend 2 Company</a></li>
    
      <li><span>27 Oct 2008</span> &raquo; <a href="/2008/10/27/find-the-princess-in-your-editor.html">Find the Princess in Your Editor</a></li>
    
      <li><span>06 Oct 2008</span> &raquo; <a href="/2008/10/06/the-me-meme.html">The Me Meme</a></li>
    
  </ul>
</div>

  </div>

  <div id="footer">
    <a href="http://creativecommons.org/licenses/by-sa/1.0/"><img alt="Creative Commons License" border="0" src="http://creativecommons.org/images/public/somerights" /></a> 
    Copyright &copy; 1998-2009 Michael Ivey unless otherwise stated.
    Unless otherwise noted, all content is licensed under a <a href="http://creativecommons.org/licenses/by-sa/1.0/">Creative Commons License</a>.
    <div id="generated">Page generated January  4 2009 at 10:17 PM by <a href="http://github.com/mojombo/jekyll">Jekyll</a>.</div>
  </div>


</div>
  
</body>
</html>
